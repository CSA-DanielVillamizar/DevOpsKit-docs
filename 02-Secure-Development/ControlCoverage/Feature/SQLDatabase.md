## IMPORTANT: DevOps Kit (AzSK) is being sunset by end of FY21. More details [here](../../../ReleaseNotes/AzSKSunsetNotice.md)
----------------------------------------------

<html>
<head>

</head><body>
<H2>SQLDatabase</H2><table><tr><th>Description & Rationale</th><th>ControlSeverity</th><th>Automated</th><th>Fix Script</th></tr><tr><td><b>Enable Azure AD admin for the SQL Database</b><br/>Using the native enterprise directory for authentication ensures that there is a built-in high level of assurance in the user identity established for subsequent access control. All Enterprise subscriptions are automatically associated with their enterprise directory (xxx.onmicrosoft.com) and users in the native directory are trusted for authentication to enterprise subscriptions.</td><td>High</td><td>Yes</td><td>Yes</td></tr><tr><td><b>Transparent data encryption (TDE) must be enabled</b><br/>Using this feature ensures that sensitive data is stored encrypted at rest. This minimizes the risk of data loss from physical theft and also helps meet regulatory compliance requirements.</td><td>High</td><td>Yes</td><td>Yes</td></tr><tr><td><b>Enable SQL Server threat detection with email admins option. Do not exclude any detection types</b><br/>Enabling threat detection helps generate alerts about suspicious activity that might indicate attacks such as SQL Injection, login from a new location, unusual usage patterns and related attacks in a timely manner.</td><td>High</td><td>Yes</td><td>Yes</td></tr><tr><td><b>Enable SQL Database threat detection with email admins option. Do not exclude any detection types</b><br/>Enabling threat detection helps generate alerts about suspicious activity that might indicate attacks such as SQL Injection, login from a new location, unusual usage patterns and related attacks in a timely manner.</td><td>High</td><td>Yes</td><td>Yes</td></tr><tr><td><b>In a SQL Server with multiple databases, setup firewall rules also at the database level</b><br/>Using the IP firewall rules ensures that access to the data or the service is restricted to a specific set of IPs. While this may not be feasible in all scenarios, when it can be used, it provides an extra layer of access control protection for critical assets and makes your database more portable.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>Do not use SQL Authentication. Use AAD-authentication instead</b><br/>Using the native enterprise directory for authentication ensures that there is a built-in high level of assurance in the user identity established for subsequent access control. All Enterprise subscriptions are automatically associated with their enterprise directory (xxx.onmicrosoft.com) and users in the native directory are trusted for authentication to enterprise subscriptions.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>Client-side encryption should be used where appropriate</b><br/>Using client-side encryption in 'Always Encrypted' mode helps protect sensitive data at rest on the server, during movement between client and server and ensures that only client applications or app servers that have access to the encryption keys can access plaintext data.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Access to SQL Servers and DBs must be granted in accordance with the principle of least privilege</b><br/>Granting minimum access ensures that users are granted just enough permissions to perform their tasks. This minimizes exposure of the resources in case of user/service account compromise.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Configure only the required IP addresses on SQL firewall. Do not use Any-to-Any IP range 0.0.0.0-255.255.255.255</b><br/>Using the firewall feature ensures that access to the data or the service is restricted to a specific set/group of clients. While this may not be feasible in all scenarios, when it can be used, it provides an extra layer of access control protection for critical assets.</td><td>High</td><td>Yes</td><td>No</td></tr><tr><td><b>Enable SQL Server audit with selected event types and retention period of minimum 365 days</b><br/>Auditing enables log collection of important system events pertinent to security. Regular monitoring of audit logs can help to detect any suspicious and malicious activity early and respond in a timely manner.</td><td>Medium</td><td>Yes</td><td>Yes</td></tr><tr><td><b>Enable SQL Database audit with selected event types and retention period of minimum 365 days</b><br/>Auditing enables log collection of important system events pertinent to security. Regular monitoring of audit logs can help to detect any suspicious and malicious activity early and respond in a timely manner.</td><td>Medium</td><td>Yes</td><td>Yes</td></tr><tr><td><b>Logs should be reviewed routinely</b><br/>Periodic reviews of diagnostics, activity and audit logs ensures that anomalous activity can be identified early enough instead of after a major compromise.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Review the Data Masking policy for SQL Database sensitive data columns if in use.</b><br/>Database dynamic data masking limits sensitive data exposure by masking it to non-privileged users and hides the sensitive data in the result set of a query over designated database fields. When used dynamic data masking should cover all sensitive columns.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Use the 'Allow access to Azure services' flag only if required.</b><br/>The 'Allow access to Azure services' setting configures a very broad range of IP addresses from Azure as permitted to access the SQL Server. Please make sure your scenario really requires this setting before enabling it. Turning it ON exposes your SQL Server to risk of attacks from resources (IPs) owned by others in the Azure region.</td><td>Medium</td><td>Yes</td><td>No</td></tr></table>
<table>
</table>
</body></html>

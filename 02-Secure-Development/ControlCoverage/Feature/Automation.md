## IMPORTANT: DevOps Kit (AzSK) is being sunset by end of FY21. More details [here](../../../ReleaseNotes/AzSKSunsetNotice.md)
----------------------------------------------

<html>
<head>

</head><body>
<H2>Automation</H2><table><tr><th>Description & Rationale</th><th>ControlSeverity</th><th>Automated</th><th>Fix Script</th></tr><tr><td><b>All users/identities must be granted minimum required permissions using Role Based Access Control (RBAC)</b><br/>Granting minimum access by leveraging RBAC feature ensures that users are granted just enough permissions to perform their tasks. This minimizes exposure of the resources in case of user/service account compromise.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Webhooks should not be used for runbooks that perform highly sensitive functions</b><br/>If webhook URL is inadequately protected or gets compromised, the runbook can be triggered by unauthorized users.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Webhook URL must have a shorter validity period (<= 60 days) to prevent malicious access</b><br/>If webhook URL gets compromised, runbook can be triggered by unauthorized users. Minimizing the validity period of the trigger URL ensures that the window of time available to an attacker in the event of compromise is minimized.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Encryption of Automation account variable assets must be enabled when storing sensitive data</b><br/>Encrypted variables are stored securely by the Azure platform. Moreover, their values cannot be retrieved from the Get-AzAutomationVariable cmdlet that ships as part of the Azure PowerShell module.</td><td>High</td><td>Yes</td><td>No</td></tr><tr><td><b>Never hard-code secure information in your runbook, instead use Automation account assets (Credentials, encrypted variables etc.)</b><br/>Automation account assets are encrypted and stored in the Azure Automation using a unique key that is generated for each automation account.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>Automation account keys should be rotated periodically as per the company standards</b><br/>Periodic key/password rotation is a good security hygiene practice as, over time, it minimizes the likelihood of data loss/compromise which can arise from key theft/brute forcing/recovery attacks.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Credentials for Run As Account should be deleted and recreated at regular intervals to make sure that Service Principal connection credentials are not compromised</b><br/>Periodic key/password rotation is a good security hygiene practice as, over time, it minimizes the likelihood of data loss/compromise which can arise from key theft/brute forcing/recovery attacks.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Automation accounts for which Hybrid Runbook Worker feature is enabled must only include assets required for the hybrid runbook functioning.</b><br/>Hybrid worker machines running the MMA (Microsoft Monitoring Agent) have unrestricted access to all assets in the Automation. Limiting these assets to only those required for the hybrid worker functioning eliminates the likelihood of compromise of a broader set of assets.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Runbook authentication must be done using dedicated service principal instead of AD User account </b><br/>Using a 'user' account should be avoided because, in general, a user account will likely have broader set of privileges to enterprise assets. Using a dedicated SPN ensures that the SPN does not have permissions beyond the ones specifically granted for the automation job to function.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Configure Log Analytics to get greater operational visibility of your Automation jobs</b><br/>Using Log Analytics, one can ensure high availability of important/critical services by monitoring jobs and getting alerts for job failures.</td><td>Medium</td><td>Yes</td><td>No</td></tr></table>
<table>
</table>
</body></html>

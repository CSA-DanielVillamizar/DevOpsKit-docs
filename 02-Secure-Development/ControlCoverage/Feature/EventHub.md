## IMPORTANT: DevOps Kit (AzSK) is being sunset by end of FY21. More details [here](../../../ReleaseNotes/AzSKSunsetNotice.md)
----------------------------------------------

<html>
<head>

</head><body>
<H2>EventHub</H2><table><tr><th>Description & Rationale</th><th>ControlSeverity</th><th>Automated</th><th>Fix Script</th></tr><tr><td><b>Event Hub clients (event senders or receivers) must not use 'namespace' level access policies</b><br/>A 'namespace' level access policy provides access to all Queues/Topics in a namespace. However, using an access policy at entity (Queue/Topic) level provides access only to the specific entity. Thus using the latter is inline with the principle of least privilege.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Access policies must be defined with minimum required permissions to the Event Hub</b><br/>Granting minimum access ensures that users are granted just enough permissions to perform their tasks. This minimizes the set of operations that can be preformed on the resource by an attacker in case of access policy key compromise.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Access policy keys must be protected at rest</b><br/>Using this feature ensures that sensitive data is stored encrypted at rest. This minimizes the risk of data loss from physical theft and also helps meet regulatory compliance requirements.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>Access policy keys must be rotated periodically</b><br/>Periodic key/password rotation is a good security hygiene practice as, over time, it minimizes the likelihood of data loss/compromise which can arise from key theft/brute forcing/recovery attacks.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Audit logs for Event Hub entities should be reviewed periodically</b><br/>Periodic reviews of diagnostics, activity and audit logs ensures that anomalous activity can be identified early enough instead of after a major compromise.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Sensitive data must be encrypted in transit</b><br/>Use of HTTPS ensures server/service authentication and protects data in transit from network layer man-in-the-middle, eavesdropping, session-hijacking attacks.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>Expiry time of SAS token should be minimum required</b><br/>If SAS token gets compromised, unauthorized users can access Event Hub entities. Minimizing the validity period of the SAS token ensures that the window of time available to an attacker in the event of compromise is minimized.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Use 'Publisher' tokens to authenticate senders instead of 'Access Policy' tokens</b><br/>Publisher tokens offer a scalable option when there are a large number of senders involved. Individual time-bound SAS tokens can be created via inheritance from a shared policy so the damage from compromise of any single token is contained. Also, all publisher tokens generated by same policy can be decommisioned by simply decommisioning the corresponding access policy.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>All users/identities must be granted minimum required permissions using Role Based Access Control (RBAC)</b><br/>Granting minimum access by leveraging RBAC feature ensures that users are granted just enough permissions to perform their tasks. This minimizes exposure of the resources in case of user/service account compromise.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Diagnostics logs must be enabled with a retention period of at least 365 days</b><br/>Logs should be retained for a long enough period so that activity trail can be recreated when investigations are required in the event of an incident or a compromise. A period of 1 year is typical for several compliance requirements as well.</td><td>Medium</td><td>Yes</td><td>No</td></tr></table>
<table>
</table>
</body></html>

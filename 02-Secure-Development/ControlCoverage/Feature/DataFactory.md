## IMPORTANT: DevOps Kit (AzSK) is being sunset by end of FY21. More details [here](../../../ReleaseNotes/AzSKSunsetNotice.md)
----------------------------------------------

<html>
<head>

</head><body>
<H2>DataFactory</H2><table><tr><th>Description & Rationale</th><th>ControlSeverity</th><th>Automated</th><th>Fix Script</th></tr><tr><td><b>Linked Service must use encryption in transit</b><br/>Use of HTTPS ensures server/service authentication and protects data in transit from network layer man-in-the-middle, eavesdropping, session-hijacking attacks.</td><td>High</td><td>Yes</td><td>No</td></tr><tr><td><b>User accounts/roles connecting to data source must have minimum required permissions</b><br/>Granting minimum access ensures that users are granted just enough permissions to perform their tasks. This minimizes exposure of the resources in case of user/service account compromise.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Data Management Gateway (DMG), if used, must be installed on a locked down machine</b><br/>The DMG machine is serving as a 'gateway' into the corporate environment allowing endpoint in the cloud access to enterprise data. Using a locked-down, secure baseline configuration ensures that this machine does not get leveraged as an entry point to the downstream data server/service.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Data Management Gateway (DMG), if used, must be registered in secure way</b><br/>Data Management Gateway(DMG) tool is required to connect data sources which are hidden behind corpnet/firewall. DMG tool needs to be installed and registered on a machine which has access to data source.The gateway key needs to be exchanged between Azure Portal and DMG tool for registration. Manual handling of this key may impose an operational risk and thus registration of DMG tool must be done via PowerShell.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Data Gateway key (on Azure Portal) must be rotated periodically</b><br/>Periodic key/password rotation is a good security hygiene practice as, over time, it minimizes the likelihood of data loss/compromise which can arise from key theft/brute forcing/recovery attacks.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Linked Service must be setup using a service account when Data Management Gateway is used </b><br/>Using a service account with access to the data tier eliminates the need to manage a separate account/connection string that DMG would otherwise need to use to access the backend data.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Monitoring must be enabled for Azure Data Factory</b><br/>Auditing enables log collection of important system events pertinent to security. Regular monitoring of audit logs can help to detect any suspicious and malicious activity early and respond in a timely manner.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Data lake store linked service in Data Factory must be configured with service-to-service authentication</b><br/>If user credentials are employed, there may be downtime due to token expiration.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>To ensure high availability multiple nodes should be configured on DMG</b><br/>DMG configured on multiple node ensures that another node is available for moving data even if one of the nodes goes down.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>For multi-node gateway, node to node communication must be encrypted with valid TLS/SSL certificate</b><br/>Use of HTTPS ensures server/service authentication and protects data in transit from network layer man-in-the-middle, eavesdropping, session-hijacking attacks.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>Use backup feature to keep a snapshot of DMG configurations</b><br/>Keeping backup of DMG config ensures that there is always a previous snapshot that can be leveraged to restore configurations quickly during a recovery scenario.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Encrypt credentials in Linked Service while configuring Data Factory (Applicable only for Linked Services which require Gateway)</b><br/>By using this configuration, credentials will be transmitted in encrypted format to the DMG which connects to the data source. This ensures that on-premise data source is accessible only through DMG as only DMG can decrypt the credential.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>Configure fault tolerance in copy activity to handle incompatible data</b><br/>In case of incompatible data flowing through the ADF channel, the default behavior will abort the copy activity. A fault tolerant configuration is helpful to continue copy activity by skipping and logging incorrect data.</td><td>Medium</td><td>No</td><td>No</td></tr></table>
<table>
</table>
</body></html>

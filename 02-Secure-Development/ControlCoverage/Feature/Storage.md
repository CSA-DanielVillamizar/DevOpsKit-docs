## IMPORTANT: DevOps Kit (AzSK) is being sunset by end of FY21. More details [here](../../../ReleaseNotes/AzSKSunsetNotice.md)
----------------------------------------------

<html>
<head>

</head><body>
<H2>Storage</H2><table><tr><th>Description & Rationale</th><th>ControlSeverity</th><th>Automated</th><th>Fix Script</th></tr><tr><td><b>The Access Type for containers must not be set to 'Anonymous'</b><br/>Data in containers that have anonymous access can be downloaded by anyone on the internet without authentication. This can lead to a compromise of corporate data. </td><td>High</td><td>Yes</td><td>Yes</td></tr><tr><td><b>Alert rules must be configured for tracking anonymous activity</b><br/>Alert rules for anonymous authentication requests enable you to detect any suspicious and malicious activity early and respond in a timely manner.</td><td>High</td><td>Yes</td><td>Yes</td></tr><tr><td><b>Storage Account must be configured to log and monitor authentication request data</b><br/>Logging and monitoring of authentication request data can help to detect suspicious and malicious activities early and respond in a timely manner.</td><td>Medium</td><td>Yes</td><td>Yes</td></tr><tr><td><b>HTTPS protocol must be used for accessing Storage Account resources</b><br/>Use of HTTPS ensures server/service authentication and protects data in transit from network layer man-in-the-middle, eavesdropping, session-hijacking attacks. When enabling HTTPS one must remember to simultaneously disable access over plain HTTP else data can still be subject to compromise over clear text connections.</td><td>High</td><td>Yes</td><td>Yes</td></tr><tr><td><b>Use IP-restrictions in SAS tokens to only permit access from intended IP addresses</b><br/>Using appropriate IP-based ACLs ensures that data in storage is protected and accessible only to entities from an expected set of endpoints.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>End user/client apps should access Storage Account through SAS token only (and not via Storage Account Key)</b><br/>A shared access signature (SAS) provides you with a way to grant limited access to objects in your Storage Account to other clients, without exposing your account key. This is in accordance with the principle of least privilege access.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>Storage Account keys must be rotated periodically</b><br/>Periodic key/password rotation is a good security hygiene practice as, over time, it minimizes the likelihood of data loss/compromise which can arise from key theft/brute forcing/recovery attacks.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Use Stored Access Policies with least privileges needed to access services in the Storage Account.</b><br/>Granting minimum access ensures that users are granted just enough permissions to perform their tasks. This minimizes operations that can be performed on the resource in case of access policy key compromise.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>Ensure that CORS access is granted to a minimal set of trusted origins and only required verbs are supported.</b><br/>CORS enables applications running under one domain to access a resource under another domain. Using '*' (allow all) for CORS setting means that an application running under any domain can have access to your application's resources and data. Restricting allowed origins to the specific set that needs access aligns with the principle of least privilege.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Ensure that Firewall and Virtual Network access is granted to a minimal set of trusted origins</b><br/>Restricting access using firewall/virtual network config reduces network exposure of a storage account by limiting access only to expected range/set of clients. Note that this depends on the overall service architecture and may not be possible to implement in all scenarios.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Soft delete should be enabled to allow recovery of deleted blobs or blob snapshots</b><br/>Enabling soft delete feature on Storage acts as a safety measure to recover inadvertently or maliciously deleted blobs or blob snapshots. If your data is critical, this can be a valuable BC/DR mechanism.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>All users/identities must be granted minimum required permissions using Role Based Access Control (RBAC)</b><br/>Granting minimum access by leveraging RBAC feature ensures that users are granted just enough permissions to perform their tasks. This minimizes exposure of the resources in case of user/service account compromise.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Use AAD-based access for storage account</b><br/>Where possible, use AAD-based identities (SPNs/groups/Users) to grant access to storage accounts using minimum RBAC roles. Wherever the client supports it, the SPN-type used should be a 'Managed Service Identity'(MSI). The identity is managed by the Azure platform and eliminates the need to provision/manage/rotate any secrets thus reducing the overall risk. Using the native enterprise directory for authentication ensures that there is a built-in high level of assurance in the user identity established for subsequent access control.</td><td>Medium</td><td>Yes</td><td>No</td></tr></table>
<table>
</table>
</body></html>

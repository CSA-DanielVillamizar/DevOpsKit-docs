## IMPORTANT: DevOps Kit (AzSK) is being sunset by end of FY21. More details [here](../../../ReleaseNotes/AzSKSunsetNotice.md)
----------------------------------------------

<html>
<head>

</head><body>
<H2>CosmosDB</H2><table><tr><th>Description & Rationale</th><th>ControlSeverity</th><th>Automated</th><th>Fix Script</th></tr><tr><td><b>Cosmos DB firewall should be enabled</b><br/>Using the firewall feature ensures that access to the data or the service is restricted to a specific set/group of clients. While this may not be feasible in all scenarios, when it can be used, it provides an extra layer of access control protection for critical assets.</td><td>High</td><td>Yes</td><td>No</td></tr><tr><td><b>Configure only the required IP addresses on Cosmos DB firewall</b><br/>Using the firewall feature ensures that access to the data or the service is restricted to a specific set/group of clients. For effective usage, whitelist only the required IPs. Whitelisting larger ranges like 0.0.0.0/0, 0.0.0.0/1, 128.0.0.0/1, etc. will defeat the purpose.</td><td>High</td><td>Yes</td><td>No</td></tr><tr><td><b>Do not use 'Eventual' consistency</b><br/>Using Eventual consistency might cause undesired effects due to its ordering guarantees. This consistency is the weakest of all and the values returned in reads are always not guaranteed to be latest write.</td><td>High</td><td>Yes</td><td>No</td></tr><tr><td><b>Use global replication</b><br/>Replication ensures continuity and rapid recovery during disasters.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Use automatic failover</b><br/>Automatic failover ensures continuity and auto recovery during disasters.</td><td>Medium</td><td>Yes</td><td>No</td></tr><tr><td><b>Use parameterized SQL queries</b><br/>Parameterized SQL queries nullify the possibility of SQL injection by pre-compiling the query. This will treat user input values purely as data.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>CosmosDb Account keys must be rotated periodically</b><br/>Periodic key/password rotation is a good security hygiene practice as, over time, it minimizes the likelihood of data loss/compromise which can arise from key theft/brute forcing/recovery attacks.</td><td>Medium</td><td>No</td><td>No</td></tr><tr><td><b>Generate resource tokens with just enough privileges and expiry needed by clients</b><br/>Using appropriate ACLs ensures that data is protected and accessible only to the entities with the appropriate level of access.</td><td>High</td><td>No</td><td>No</td></tr><tr><td><b>Do not send resource token with read write (RW) permission to untrusted clients</b><br/>An untrusted client might use the read-write resource tokens that it received to make undesirable updates to the resource.</td><td>High</td><td>No</td><td>No</td></tr></table>
<table>
</table>
</body></html>
